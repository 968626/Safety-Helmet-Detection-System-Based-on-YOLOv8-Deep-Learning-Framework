# å®‰å…¨å¸½æ£€æµ‹ç³»ç»Ÿ - è¯¦ç»†è¯´æ˜æ–‡æ¡£
# æºç è·å–ï¼šhttps://mbd.pub/o/bread/YZWXmZdwZA==
## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäºYOLOv8æ·±åº¦å­¦ä¹ æ¡†æ¶çš„å®‰å…¨å¸½æ£€æµ‹ç³»ç»Ÿï¼Œä¸“ä¸ºå·¥ä¸šå®‰å…¨ç›‘æ§è®¾è®¡ã€‚è¯¥ç³»ç»Ÿèƒ½å¤Ÿå®æ—¶æ£€æµ‹å›¾ç‰‡ã€è§†é¢‘å’Œæ‘„åƒå¤´æµä¸­çš„å®‰å…¨å¸½ä½©æˆ´æƒ…å†µï¼Œæä¾›å‡†ç¡®çš„ç»Ÿè®¡åˆ†æå’Œå¯è§†åŒ–ç»“æœã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. å¤šæ¨¡å¼æ£€æµ‹åŠŸèƒ½
- **å›¾ç‰‡æ£€æµ‹**: æ”¯æŒJPGã€JPEGã€PNGã€BMPæ ¼å¼å›¾ç‰‡æ–‡ä»¶æ£€æµ‹
- **è§†é¢‘æ£€æµ‹**: æ”¯æŒMP4ã€AVIç­‰è§†é¢‘æ–‡ä»¶é€å¸§åˆ†æ
- **å®æ—¶æ‘„åƒå¤´**: è°ƒç”¨æœ¬åœ°æ‘„åƒå¤´è¿›è¡Œå®æ—¶æµæ£€æµ‹
- **æ‰¹é‡å¤„ç†**: æ”¯æŒå¤šæ–‡ä»¶æ‰¹é‡æ£€æµ‹å¤„ç†

### 2. æ™ºèƒ½ç»Ÿè®¡åˆ†æ
- **å®æ—¶è®¡æ•°**: åŠ¨æ€ç»Ÿè®¡æ€»æ£€æµ‹æ•°é‡å’Œå„ç±»åˆ«æ•°é‡
- **åˆ†ç±»ç»Ÿè®¡**: åˆ†åˆ«ç»Ÿè®¡"æœªæˆ´å®‰å…¨å¸½"å’Œ"å·²æˆ´å®‰å…¨å¸½"æ•°é‡
- **å†å²è®°å½•**: ä¿å­˜æ£€æµ‹å†å²è®°å½•ï¼Œæ”¯æŒæ•°æ®å¯¼å‡º
- **æ€§èƒ½ç›‘æ§**: å®æ—¶æ˜¾ç¤ºå¤„ç†é€Ÿåº¦å’Œèµ„æºå ç”¨æƒ…å†µ

### 3. ç»“æœç®¡ç†åŠŸèƒ½
- **ç»“æœä¿å­˜**: è‡ªåŠ¨ä¿å­˜æ ‡æ³¨åçš„æ£€æµ‹ç»“æœå›¾ç‰‡
- **å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒæ£€æµ‹ç»Ÿè®¡æ•°æ®å¯¼å‡ºä¸ºCSVæ ¼å¼
- **å†å²æŸ¥çœ‹**: æä¾›æ£€æµ‹å†å²è®°å½•æŸ¥çœ‹åŠŸèƒ½
- **æ¨¡å‹ç®¡ç†**: æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹åŠ è½½å’Œåˆ‡æ¢

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 åº”ç”¨å±‚ (Application)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å›¾å½¢ç•Œé¢ (Tkinter)   â”‚  ä¸šåŠ¡é€»è¾‘   â”‚  æ•°æ®ç®¡ç†  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æœåŠ¡å±‚ (Service)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ£€æµ‹æœåŠ¡   â”‚  ç»Ÿè®¡æœåŠ¡   â”‚  æ–‡ä»¶æœåŠ¡   â”‚ æ¨¡å‹æœåŠ¡ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ ¸å¿ƒå±‚ (Core)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        YOLOv8æ·±åº¦å­¦ä¹ å¼•æ“ (Ultralytics)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ•°æ®å±‚ (Data)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ¨¡å‹æ–‡ä»¶   â”‚  é…ç½®æ–‡ä»¶   â”‚  æ•°æ®é›†   â”‚ ç»“æœæ–‡ä»¶  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–‡ä»¶ç»“æ„è¯¦è§£

```
ultralytics-main-master/
â”œâ”€â”€ ğŸ“ æ ¸å¿ƒç¨‹åºæ–‡ä»¶
â”‚   â”œâ”€â”€ Main.py              # ä¸»ç¨‹åº - å›¾å½¢ç•Œé¢æ£€æµ‹ç³»ç»Ÿ (350+è¡Œ)
â”‚   â”œâ”€â”€ test.py              # æµ‹è¯•ç¨‹åº - åŸºç¡€æ£€æµ‹åŠŸèƒ½
â”‚   â”œâ”€â”€ train.py             # è®­ç»ƒç¨‹åº - æ¨¡å‹è®­ç»ƒ
â”‚   â””â”€â”€ safehat.yaml         # æ•°æ®é›†é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ æ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€â”€ best.pt             # è®­ç»ƒå¥½çš„æœ€ä½³æ¨¡å‹æƒé‡
â”‚   â””â”€â”€ yolov8n.pt          # YOLOv8åŸºç¡€é¢„è®­ç»ƒæ¨¡å‹
â”‚
â”œâ”€â”€ ğŸ“ æ•°æ®é›†
â”‚   â””â”€â”€ css-data/
â”‚       â”œâ”€â”€ train/          # è®­ç»ƒé›† (1200+å¼ å›¾ç‰‡)
â”‚       â”‚   â”œâ”€â”€ images/     # è®­ç»ƒå›¾ç‰‡
â”‚       â”‚   â””â”€â”€ labels/     # YOLOæ ¼å¼æ ‡æ³¨æ–‡ä»¶
â”‚       â”œâ”€â”€ valid/          # éªŒè¯é›† (300+å¼ å›¾ç‰‡)
â”‚       â”‚   â”œâ”€â”€ images/     # éªŒè¯å›¾ç‰‡
â”‚       â”‚   â””â”€â”€ labels/     # éªŒè¯æ ‡æ³¨
â”‚       â””â”€â”€ test/           # æµ‹è¯•é›† (300+å¼ å›¾ç‰‡)
â”‚           â”œâ”€â”€ images/     # æµ‹è¯•å›¾ç‰‡
â”‚           â””â”€â”€ labels/     # æµ‹è¯•æ ‡æ³¨
â”‚
â”œâ”€â”€ ğŸ“ è¿è¡Œç»“æœ
â”‚   â””â”€â”€ runs/
â”‚       â””â”€â”€ detect/
â”‚           â”œâ”€â”€ train3/     # ç¬¬ä¸‰æ¬¡è®­ç»ƒç»“æœ
â”‚           â””â”€â”€ train32/    # ç¬¬32æ¬¡è®­ç»ƒç»“æœ
â”‚
â”œâ”€â”€ ğŸ“ ä¾èµ–ç¯å¢ƒ
â”‚   â””â”€â”€ venv/               # Pythonè™šæ‹Ÿç¯å¢ƒ
â”‚       â”œâ”€â”€ Scripts/        # å¯æ‰§è¡Œæ–‡ä»¶
â”‚       â”œâ”€â”€ Lib/            # åº“æ–‡ä»¶
â”‚       â””â”€â”€ pyvenv.cfg     # ç¯å¢ƒé…ç½®
â”‚
â””â”€â”€ ğŸ“ æ–‡æ¡£èµ„æº
    â”œâ”€â”€ README.md           # é¡¹ç›®è¯´æ˜æ–‡æ¡£
    â”œâ”€â”€ é¡¹ç›®è¯¦ç»†è¯´æ˜æ–‡æ¡£.md  # æœ¬è¯¦ç»†æ–‡æ¡£
    â””â”€â”€ æˆªå›¾/              # ç³»ç»Ÿæˆªå›¾
        â”œâ”€â”€ 1.png
        â”œâ”€â”€ 2.png
        â””â”€â”€ 3.png
```

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. æ·±åº¦å­¦ä¹ æ¨¡å‹

**æ¨¡å‹æ¶æ„**: YOLOv8 (You Only Look Once version 8)
- **ä¸»å¹²ç½‘ç»œ**: CSPDarknet53
- **é¢ˆéƒ¨ç½‘ç»œ**: PANet (Path Aggregation Network)
- **æ£€æµ‹å¤´**: Decoupled Head
- **æ¿€æ´»å‡½æ•°**: SiLU (Sigmoid Linear Unit)

**æ¨¡å‹å‚æ•°**:
- è¾“å…¥å°ºå¯¸: 640x640 pixels
- ç±»åˆ«æ•°: 2 (No_SafetyHat, SafetyHat)
- é”šç‚¹æ¡†: è‡ªåŠ¨å­¦ä¹ 
- ä¼˜åŒ–å™¨: AdamW

### 2. å›¾å½¢ç•Œé¢è®¾è®¡

**ç•Œé¢æ¡†æ¶**: Tkinter
- **ä¸»çª—å£**: 800x600 åˆ†è¾¨ç‡
- **å¸ƒå±€ç®¡ç†**: Grid ç½‘æ ¼å¸ƒå±€
- **ç»„ä»¶ç±»å‹**: 
  - Frame æ¡†æ¶å®¹å™¨
  - Button åŠŸèƒ½æŒ‰é’®
  - Label ä¿¡æ¯æ ‡ç­¾
  - Canvas å›¾åƒæ˜¾ç¤º
  - Menu èœå•æ 

**ç•Œé¢åˆ†åŒº**:
1. **é¡¶éƒ¨åŠŸèƒ½åŒº**: æ£€æµ‹æ¨¡å¼é€‰æ‹©æŒ‰é’®
2. **ä¸­éƒ¨æ˜¾ç¤ºåŒº**: å›¾åƒ/è§†é¢‘æ˜¾ç¤ºç”»å¸ƒ
3. **å³ä¾§æ§åˆ¶åŒº**: å‚æ•°è®¾ç½®å’Œæ¨¡å‹ç®¡ç†
4. **åº•éƒ¨çŠ¶æ€åŒº**: ç»Ÿè®¡ä¿¡æ¯å’Œç³»ç»ŸçŠ¶æ€

### 3. æ ¸å¿ƒç®—æ³•æµç¨‹

```python
# æ£€æµ‹æµç¨‹ä¼ªä»£ç 
def detection_pipeline(input_source):
    # 1. é¢„å¤„ç†
    image = preprocess(input_source)
    
    # 2. æ¨¡å‹æ¨ç†
    results = model.predict(image)
    
    # 3. åå¤„ç†
    detections = postprocess(results)
    
    # 4. å¯è§†åŒ–æ ‡æ³¨
    annotated_image = visualize(detections, image)
    
    # 5. ç»Ÿè®¡æ›´æ–°
    update_statistics(detections)
    
    # 6. ç»“æœæ˜¾ç¤º
    display_results(annotated_image)
    
    return annotated_image, detections
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æ£€æµ‹æ€§èƒ½
| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| æ¨ç†é€Ÿåº¦ | 54.5ms/å¸§ | GPUåŠ é€Ÿä¸‹çš„å•å¸§å¤„ç†æ—¶é—´ |
| é¢„å¤„ç† | 2.0ms | å›¾åƒæ ‡å‡†åŒ–å’Œç¼©æ”¾ |
| åå¤„ç† | 1.0ms | ç»“æœè§£æå’Œéæå¤§æŠ‘åˆ¶ |
| å‡†ç¡®ç‡ | >95% | åœ¨æµ‹è¯•é›†ä¸Šçš„mAPå€¼ |
| å¬å›ç‡ | >93% | ç›®æ ‡æ£€æµ‹çš„å¬å›æ€§èƒ½ |

### ç³»ç»Ÿèµ„æº
| èµ„æºç±»å‹ | å ç”¨æƒ…å†µ | ä¼˜åŒ–å»ºè®® |
|----------|----------|----------|
| GPUå†…å­˜ | ~2GB | é€‚åˆå¤§å¤šæ•°æ¶ˆè´¹çº§æ˜¾å¡ |
| CPUå ç”¨ | 15-25% | å¤šçº¿ç¨‹ä¼˜åŒ–è‰¯å¥½ |
| å†…å­˜å ç”¨ | 1-2GB | åŠ¨æ€å†…å­˜ç®¡ç† |
| ç£ç›˜ç©ºé—´ | 500MB+ | ä¸»è¦ä¸ºæ¨¡å‹æ–‡ä»¶å ç”¨ |

## ğŸš€ å®‰è£…éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, Linux, macOS
- **Pythonç‰ˆæœ¬**: 3.8, 3.9, 3.10, 3.11
- **ç¡¬ä»¶è¦æ±‚**: 
  - CPU: 4æ ¸å¿ƒä»¥ä¸Š
  - å†…å­˜: 8GB+ 
  - GPU: NVIDIAæ˜¾å¡ (å¯é€‰ï¼Œæ¨è)
  - å­˜å‚¨: 1GBå¯ç”¨ç©ºé—´

### ä¾èµ–å®‰è£…

**æ ¸å¿ƒä¾èµ–åŒ…**:
```bash
# æ·±åº¦å­¦ä¹ æ¡†æ¶
pip install ultralytics

# å›¾å½¢ç•Œé¢
pip install tkinter

# å›¾åƒå¤„ç†
pip install opencv-python
pip install pillow

# æ•°æ®å¤„ç†
pip install numpy
pip install pandas

# å…¶ä»–å·¥å…·
pip install matplotlib
pip install seaborn
```

**å®Œæ•´requirements.txt**:
```
ultralytics==8.0.0
opencv-python==4.5.4.60
pillow==9.0.0
numpy==1.21.0
pandas==1.3.0
torch==1.13.0
torchvision==0.14.0
matplotlib==3.5.0
seaborn==0.11.0
```

### éƒ¨ç½²æ­¥éª¤

1. **ç¯å¢ƒå‡†å¤‡**
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»ç¯å¢ƒ (Windows)
venv\Scripts\activate

# æ¿€æ´»ç¯å¢ƒ (Linux/Mac)
source venv/bin/activate
```

2. **å®‰è£…ä¾èµ–**
```bash
# å®‰è£…æ ¸å¿ƒä¾èµ–
pip install -r requirements.txt

# æˆ–è€…é€ä¸ªå®‰è£…
pip install ultralytics opencv-python pillow
```

3. **æ¨¡å‹å‡†å¤‡**
```bash
# ç¡®ä¿best.ptæ¨¡å‹æ–‡ä»¶å­˜åœ¨
# å¦‚æœä¸å­˜åœ¨ï¼Œå¯ä»¥è¿è¡Œè®­ç»ƒç¨‹åº
python train.py
```

4. **è¿è¡Œç³»ç»Ÿ**
```bash
# å¯åŠ¨å›¾å½¢ç•Œé¢
python Main.py
```

5. **éªŒè¯å®‰è£…**
```bash
# è¿è¡Œæµ‹è¯•ç¨‹åº
python test.py
```

## ğŸ“– ä½¿ç”¨æ•™ç¨‹

### åŸºæœ¬æ“ä½œæµç¨‹

1. **å¯åŠ¨ç¨‹åº**
   - åŒå‡»è¿è¡Œ `Main.py` æˆ–å‘½ä»¤è¡Œæ‰§è¡Œ `python Main.py`
   - ç³»ç»ŸåŠ è½½æ¨¡å‹æ–‡ä»¶ `best.pt`
   - åˆå§‹åŒ–å›¾å½¢ç•Œé¢ç»„ä»¶

2. **é€‰æ‹©æ£€æµ‹æ¨¡å¼**
   - ç‚¹å‡»"å›¾ç‰‡æ£€æµ‹": é€‰æ‹©å•å¼ å›¾ç‰‡æ–‡ä»¶
   - ç‚¹å‡»"è§†é¢‘æ£€æµ‹": é€‰æ‹©è§†é¢‘æ–‡ä»¶
   - ç‚¹å‡»"æ‘„åƒå¤´æ£€æµ‹": å¯åŠ¨æ‘„åƒå¤´å®æ—¶æ£€æµ‹

3. **æŸ¥çœ‹æ£€æµ‹ç»“æœ**
   - ä¸»ç”»å¸ƒæ˜¾ç¤ºæ ‡æ³¨åçš„å›¾åƒ
   - å®‰å…¨å¸½ç”¨ç»¿è‰²æ¡†æ ‡æ³¨
   - æœªæˆ´å®‰å…¨å¸½ç”¨çº¢è‰²æ¡†æ ‡æ³¨
   - æ˜¾ç¤ºç½®ä¿¡åº¦åˆ†æ•°

4. **ä¿å­˜ç»“æœ**
   - ç‚¹å‡»"ä¿å­˜ç»“æœ"æŒ‰é’®
   - é€‰æ‹©ä¿å­˜è·¯å¾„å’Œæ–‡ä»¶å
   - è‡ªåŠ¨ä¿å­˜æ ‡æ³¨å›¾ç‰‡å’Œç»Ÿè®¡ä¿¡æ¯

### é«˜çº§åŠŸèƒ½ä½¿ç”¨

**è‡ªå®šä¹‰æ¨¡å‹åŠ è½½**:
```python
# åœ¨Main.pyä¸­ä¿®æ”¹æ¨¡å‹è·¯å¾„
model = YOLO("custom_model.pt")  # æ›¿æ¢ä¸ºè‡ªå®šä¹‰æ¨¡å‹
```

**å‚æ•°è°ƒæ•´**:
```python
# è°ƒæ•´æ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼
model.conf = 0.6  # é»˜è®¤0.5ï¼Œæé«˜å¯å‡å°‘è¯¯æ£€

# è°ƒæ•´IoUé˜ˆå€¼
model.iou = 0.5   # é»˜è®¤0.45ï¼Œæé«˜å¯å‡å°‘é‡å æ£€æµ‹
```

**æ‰¹é‡å¤„ç†**:
```python
# æ‰¹é‡å¤„ç†å›¾ç‰‡æ–‡ä»¶å¤¹
import os
folder_path = "path/to/images"
for img_file in os.listdir(folder_path):
    if img_file.endswith(('.jpg', '.png')):
        results = model(os.path.join(folder_path, img_file))
```

## ğŸ” ä»£ç è¯¦è§£

### Main.py æ ¸å¿ƒä»£ç è§£æ

#### 1. ä¸»ç¨‹åºç»“æ„
```python
class SafetyHatDetector:
    def __init__(self):
        # åˆå§‹åŒ–å›¾å½¢ç•Œé¢
        self.root = tk.Tk()
        self.setup_ui()
        
        # åˆå§‹åŒ–YOLOæ¨¡å‹
        self.model = YOLO("best.pt")
        
        # åˆå§‹åŒ–ç»Ÿè®¡å˜é‡
        self.detection_results = []
        self.total_detections = 0
        self.class_counts = {'No_SafetyHat': 0, 'SafetyHat': 0}
```

#### 2. ç•Œé¢åˆå§‹åŒ–
```python
def setup_ui(self):
    # åˆ›å»ºä¸»æ¡†æ¶
    main_frame = tk.Frame(self.root)
    main_frame.pack(fill=tk.BOTH, expand=True)
    
    # é¡¶éƒ¨æŒ‰é’®åŒºåŸŸ
    button_frame = tk.Frame(main_frame)
    button_frame.pack(pady=10)
    
    # æ£€æµ‹åŠŸèƒ½æŒ‰é’®
    self.btn_image = tk.Button(button_frame, text="å›¾ç‰‡æ£€æµ‹", command=self.detect_image)
    self.btn_video = tk.Button(button_frame, text="è§†é¢‘æ£€æµ‹", command=self.detect_video)
    self.btn_camera = tk.Button(button_frame, text="æ‘„åƒå¤´æ£€æµ‹", command=self.detect_camera)
    
    # å›¾åƒæ˜¾ç¤ºåŒºåŸŸ
    self.canvas = tk.Canvas(main_frame, bg='white')
    self.canvas.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)
    
    # çŠ¶æ€ä¿¡æ¯åŒºåŸŸ
    status_frame = tk.Frame(main_frame)
    status_frame.pack(fill=tk.X, padx=10, pady=5)
    
    self.status_label = tk.Label(status_frame, text="å°±ç»ª")
    self.statistics_label = tk.Label(status_frame, text="æ€»æ£€æµ‹æ•°: 0")
```

#### 3. æ£€æµ‹åŠŸèƒ½å®ç°
```python
def detect_image(self):
    """å›¾ç‰‡æ£€æµ‹åŠŸèƒ½"""
    file_path = filedialog.askopenfilename(
        filetypes=[("å›¾ç‰‡æ–‡ä»¶", "*.jpg *.jpeg *.png *.bmp")]
    )
    
    if file_path:
        # æ‰§è¡ŒYOLOæ£€æµ‹
        results = self.model(file_path)
        
        # è·å–æ ‡æ³¨å›¾åƒ
        annotated_frame = results[0].plot()
        
        # æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        self.update_statistics(results)
        
        # æ˜¾ç¤ºç»“æœ
        self.display_image(annotated_frame)
```

#### 4. ç»Ÿè®¡ä¿¡æ¯æ›´æ–°
```python
def update_statistics(self, result):
    """æ›´æ–°æ£€æµ‹ç»Ÿè®¡ä¿¡æ¯"""
    total_detections = 0
    class_counts = {'No_SafetyHat': 0, 'SafetyHat': 0}
    
    # å¤„ç†æ£€æµ‹ç»“æœ
    if isinstance(result, list):  # å¤šå¸§ç»“æœ
        for frame in result:
            if hasattr(frame, 'boxes') and frame.boxes is not None:
                for box in frame.boxes:
                    class_id = int(box.cls[0])
                    class_name = self.model.names[class_id]
                    class_counts[class_name] += 1
                    total_detections += 1
    else:  # å•å¸§ç»“æœ
        if hasattr(result, 'boxes') and result.boxes is not None:
            for box in result.boxes:
                class_id = int(box.cls[0])
                class_name = self.model.names[class_id]
                class_counts[class_name] += 1
                total_detections += 1
    
    # æ›´æ–°å…¨å±€ç»Ÿè®¡
    self.total_detections += total_detections
    for cls, count in class_counts.items():
        self.class_counts[cls] += count
    
    # æ›´æ–°ç•Œé¢æ˜¾ç¤º
    self.update_status_display()
```

